<?php
// $Id:

/**
 * @file
 * maestro_test_flows.install
 */

function maestro_test_flows_install() {
  //we need to include the maestro.admin.inc file
  include(drupal_get_path('module','maestro') . '/maestro.admin.inc');

  $_POST['offset_top'] = 0;
  $_POST['offset_left'] = 0;
  $variable_xref_array = Array();
  $variable_xref_array[0] = 0;
  $task_xref_array = Array();
  $task_xref_array[0] = 0;
  $templateID = maestro_createNewTemplate("Test - Basic Workflow Example", TRUE, TRUE);
  $variable_xref_array[2] = maestro_createTemplateVariable($templateID, "initiator", "");
  $variable_xref_array[3] = maestro_createTemplateVariable($templateID, "var1", "0");
  $ti = new MaestroTaskInterfaceStart(0, $templateID);
  $ti->create();
  $task_xref_array[4] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 1;
  $rec->taskname = 'Start';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 65;
  $rec->offset_top = 100;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceEnd(0, $templateID);
  $ti->create();
  $task_xref_array[5] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'End';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 73;
  $rec->offset_top = 300;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceSetProcessVariable(0, $templateID);
  $ti->create();
  $task_xref_array[6] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('a:4:{s:10:"var_to_set";s:1:"3";s:9:"inc_value";s:0:"";s:9:"var_value";s:1:"5";s:8:"set_type";s:1:"0";}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Set Process Variable for Test';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 245;
  $rec->offset_top = 100;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceIf(0, $templateID);
  $ti->create();
  $task_xref_array[7] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('a:5:{s:11:"if_operator";s:1:">";s:8:"if_value";s:1:"5";s:20:"if_process_arguments";s:0:"";s:20:"if_argument_variable";s:1:"3";s:17:"if_task_arguments";s:8:"variable";}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'If var1 > 5';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 718;
  $rec->offset_top = 213;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[8] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:27:"var1 is not greater than 5.";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'var1 Not Greater';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 268;
  $rec->offset_top = 301;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[9] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:23:"var1 is greater than 5.";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'var1 Greater';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 49;
  $rec->offset_top = 188;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[4], 'b1' => $task_xref_array[6], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[6], 'b1' => $task_xref_array[7], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[7], 'b1' => $task_xref_array[9], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[7], 'b1' => $task_xref_array[0], 'c1' => $task_xref_array[8]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[8], 'b1' => $task_xref_array[5], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[8],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[8],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[2],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[9], 'b1' => $task_xref_array[5], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[9],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[9],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[2],));

  $_POST['offset_top'] = 0;
  $_POST['offset_left'] = 0;
  $variable_xref_array = Array();
  $variable_xref_array[0] = 0;
  $task_xref_array = Array();
  $task_xref_array[0] = 0;
  $templateID = maestro_createNewTemplate("Test Simple Parallel AND", TRUE, TRUE);
  $variable_xref_array[4] = maestro_createTemplateVariable($templateID, "initiator", "");
  $ti = new MaestroTaskInterfaceStart(0, $templateID);
  $ti->create();
  $task_xref_array[10] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 1;
  $rec->taskname = 'Start';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 43;
  $rec->offset_top = 249;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceEnd(0, $templateID);
  $ti->create();
  $task_xref_array[11] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'End';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 914;
  $rec->offset_top = 250;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[12] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:22:"Third Interactive Task";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Third Interactive Task';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 283;
  $rec->offset_top = 368;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[13] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:23:"Second Interactive Task";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Second Interactive Task';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 281;
  $rec->offset_top = 236;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[14] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:22:"First Interactive Task";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'First Interactive Task';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 285;
  $rec->offset_top = 114;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceAnd(0, $templateID);
  $ti->create();
  $task_xref_array[15] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'AND - Wait for all 3 branches to complete.';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 542;
  $rec->offset_top = 249;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[10], 'b1' => $task_xref_array[14], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[10], 'b1' => $task_xref_array[13], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[10], 'b1' => $task_xref_array[12], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[12], 'b1' => $task_xref_array[15], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[12],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[12],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[4],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[13], 'b1' => $task_xref_array[15], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[13],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[13],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[4],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[14], 'b1' => $task_xref_array[15], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[14],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[14],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[4],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[15], 'b1' => $task_xref_array[11], 'c1' => $task_xref_array[0]));

  $_POST['offset_top'] = 0;
  $_POST['offset_left'] = 0;
  $variable_xref_array = Array();
  $variable_xref_array[0] = 0;
  $task_xref_array = Array();
  $task_xref_array[0] = 0;
  $templateID = maestro_createNewTemplate("Test Parallel and Sequential Branches", TRUE, TRUE);
  $variable_xref_array[5] = maestro_createTemplateVariable($templateID, "initiator", "");
  $ti = new MaestroTaskInterfaceStart(0, $templateID);
  $ti->create();
  $task_xref_array[16] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 1;
  $rec->taskname = 'Start';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 486;
  $rec->offset_top = 86;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceEnd(0, $templateID);
  $ti->create();
  $task_xref_array[17] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'End';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 497;
  $rec->offset_top = 594;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[18] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:21:"Serial Branch Task #1";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Serial Branch Task #1';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 209;
  $rec->offset_top = 181;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[19] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:21:"Serial Branch Task #2";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Serial Branch Task #2';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 211;
  $rec->offset_top = 290;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[20] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:23:"Parallel Branch Task #1";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Parallel Branch Task #1';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 677;
  $rec->offset_top = 187;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[21] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:30:"Second Parallel Branch task #1";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Second Parallel Branch Task #1';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 524;
  $rec->offset_top = 295;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[22] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:19:"maestro_showmessage";s:13:"optional_parm";a:1:{s:7:"message";s:30:"Second Parallel Branch Task #2";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Second Parallel Branch Task #2';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 822;
  $rec->offset_top = 294;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceAnd(0, $templateID);
  $ti->create();
  $task_xref_array[23] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'AND the 2nd Parallel Branch together';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 663;
  $rec->offset_top = 413;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceAnd(0, $templateID);
  $ti->create();
  $task_xref_array[24] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'AND the serial and parallel branches together';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 382;
  $rec->offset_top = 505;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[16], 'b1' => $task_xref_array[18], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[16], 'b1' => $task_xref_array[20], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[18], 'b1' => $task_xref_array[19], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[18],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[18],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[5],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[19], 'b1' => $task_xref_array[24], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[19],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[19],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[5],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[20], 'b1' => $task_xref_array[21], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[20], 'b1' => $task_xref_array[22], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[20],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[20],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[5],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[21], 'b1' => $task_xref_array[23], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[21],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[21],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[5],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[22], 'b1' => $task_xref_array[23], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[22],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[22],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[5],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[23], 'b1' => $task_xref_array[24], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[24], 'b1' => $task_xref_array[17], 'c1' => $task_xref_array[0]));

  $_POST['offset_top'] = 0;
  $_POST['offset_left'] = 0;
  $variable_xref_array = Array();
  $variable_xref_array[0] = 0;
  $task_xref_array = Array();
  $task_xref_array[0] = 0;
  $templateID = maestro_createNewTemplate("Test Content Type Task", TRUE, TRUE);
  $variable_xref_array[6] = maestro_createTemplateVariable($templateID, "initiator", "");
  $variable_xref_array[7] = maestro_createTemplateVariable($templateID, "content_type", "article");
  $ti = new MaestroTaskInterfaceStart(0, $templateID);
  $ti->create();
  $task_xref_array[25] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 1;
  $rec->taskname = 'Start';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 93;
  $rec->offset_top = 158;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceEnd(0, $templateID);
  $ti->create();
  $task_xref_array[26] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'End';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 917;
  $rec->offset_top = 458;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceContentType(0, $templateID);
  $ti->create();
  $task_xref_array[27] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:1:{s:12:"content_type";s:7:"article";}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Create New Article';
  $rec->assigned_by_variable = 1;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 1;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 273;
  $rec->offset_top = 158;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[28] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:25:"maestro_reviewContentType";s:13:"optional_parm";a:1:{s:12:"content_type";s:7:"article";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Editor Review Article';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 1;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 478;
  $rec->offset_top = 153;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceIf(0, $templateID);
  $ti->create();
  $task_xref_array[29] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('a:5:{s:11:"if_operator";s:0:"";s:8:"if_value";s:0:"";s:20:"if_process_arguments";s:15:"lasttasksuccess";s:20:"if_argument_variable";s:0:"";s:17:"if_task_arguments";s:6:"status";}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Check if Editor Accepted';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 442;
  $rec->offset_top = 281;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceInteractiveFunction(0, $templateID);
  $ti->create();
  $task_xref_array[30] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 1;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:25:"maestro_reviewContentType";s:13:"optional_parm";a:1:{s:12:"content_type";s:7:"article";}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'New Task';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 443;
  $rec->offset_top = 363;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceIf(0, $templateID);
  $ti->create();
  $task_xref_array[31] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('a:5:{s:11:"if_operator";s:0:"";s:8:"if_value";s:0:"";s:20:"if_process_arguments";s:15:"lasttasksuccess";s:20:"if_argument_variable";s:0:"";s:17:"if_task_arguments";s:6:"status";}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Check if Publisher Accepted';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 692;
  $rec->offset_top = 373;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $ti = new MaestroTaskInterfaceBatchFunction(0, $templateID);
  $ti->create();
  $task_xref_array[32] = $ti->get_task_id();
  $res = db_select('maestro_template_data', 'a');
  $res->fields('a', array('id', 'task_data'));
  $res->condition('a.id', $ti->get_task_id(), '=');
  $rec = current($res->execute()->fetchAll());
  $rec->is_interactive = 0;
  $fixed_data = $ti->modulateExportTaskData('a:2:{s:7:"handler";s:22:"maestro_publishArticle";s:13:"optional_parm";a:0:{}}', $variable_xref_array);
  $rec->task_data = $fixed_data;
  $rec->handler = '';
  $rec->first_task = 0;
  $rec->taskname = 'Publish Article';
  $rec->assigned_by_variable = 0;
  $rec->notify_type = 0;
  $rec->argument_variable = '';
  $rec->regenerate = 0;
  $rec->regen_all_live_tasks = 0;
  $rec->is_dynamic_taskname = 0;
  $rec->dynamic_taskname_variable_id = 0;
  $rec->reminder_interval = 0;
  $rec->reminder_interval_variable = 0;
  $rec->subsequent_reminder_interval = 0;
  $rec->last_updated = 0;
  $rec->pre_notify_subject = '';
  $rec->post_notify_subject = '';
  $rec->reminder_subject = '';
  $rec->pre_notify_message = '';
  $rec->post_notify_message = '';
  $rec->reminder_message = '';
  $rec->num_reminders = 0;
  $rec->escalate_variable_id = 0;
  $rec->offset_left = 719;
  $rec->offset_top = 455;
  $rec->surpress_first_notification = 0;
  drupal_write_record('maestro_template_data', $rec, array('id'));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[25], 'b1' => $task_xref_array[27], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[27], 'b1' => $task_xref_array[28], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[27],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[27],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[6],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[28], 'b1' => $task_xref_array[29], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[28],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("Editor");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[28],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[0],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[29], 'b1' => $task_xref_array[0], 'c1' => $task_xref_array[27]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[29], 'b1' => $task_xref_array[30], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[30], 'b1' => $task_xref_array[31], 'c1' => $task_xref_array[0]));
  $query = db_select('maestro_template_data', 'a');
  $query->fields('a',array('task_class_name'));
  $query->condition('a.id',$task_xref_array[30],'=');
  $name=current($query->execute()->fetchAll());
  $task_type = substr($name->task_class_name, 15);
  $task_class = 'MaestroTaskInterface' . $task_type;
  $ti = new $task_class(0,0);
  $modulated_user = $ti->modulateExportUser("Publisher");
  $sql  = "INSERT INTO {maestro_template_assignment} (template_data_id, uid, gid, process_variable) VALUES (:a1, :b1, :c1, :d1)";
  db_query($sql, array( 'a1' => $task_xref_array[30],'b1' => $modulated_user,'c1' => 0,'d1' => $variable_xref_array[0],));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[31], 'b1' => $task_xref_array[0], 'c1' => $task_xref_array[28]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[31], 'b1' => $task_xref_array[32], 'c1' => $task_xref_array[0]));
  $sql  = "INSERT INTO {maestro_template_data_next_step} (template_data_from, template_data_to, template_data_to_false) VALUES (:a1, :b1, :c1)";
  db_query($sql, array('a1' => $task_xref_array[32], 'b1' => $task_xref_array[26], 'c1' => $task_xref_array[0]));

}

function maestro_test_flows_uninstall() {

}